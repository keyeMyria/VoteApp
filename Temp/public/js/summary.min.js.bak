var vm = new Vue({
    el:'html',
    data:{
        page:'summary',
        logs:0,
        option:{
            // 柱状图
            item1:{
                title:{
                    text: "各项电影得票图",
                    fontSize:16
                },
                animationEnabled: true,
                data: [
                    {
                        type: "column",
                        name: "当日各电影得票数",
                        showInLegend: true,
                        axisY:{
                            suffix: "票"
                        },
                        dataPoints: [
                            { label: "长城",  y: 5,indexLabel:"{y}"  },
                            { label: "摆渡人", y: 15,indexLabel:"{y}"  },
                            { label: "玩命直播", y: 25,indexLabel:"{y}"  },
                            { label: "星球大战",  y: 30,indexLabel:"{y}"  },
                            { label: "浪漫搭档",  y: 28,indexLabel:"{y}"  }
                        ]
                    },
                    {
                        type: "line",
                        name: "当月各电影得票数",
                        showInLegend: true,
                        axisY:{
                            suffix: "票"
                        },
                        dataPoints: [
                            { label: "长城",  y: 6,indexLabel:"{y}"  },
                            { label: "摆渡人", y: 16,indexLabel:"{y}"  },
                            { label: "玩命直播", y: 80,indexLabel:"{y}"  },
                            { label: "星球大战",  y: 30,indexLabel:"{y}"  },
                            { label: "浪漫搭档",  y: 40,indexLabel:"{y}"  }
                        ]
                    }
                ]
            },
            // 当日电影饼状图
            item2:{
                title:{
                    text: "各项电影当日饼状图",
                    fontSize:16
                },
                theme: "theme2",
                animationEnabled: true,
                legend: {			
                    verticalAlign: "center",
                    horizontalAlign: "left"
                },
                data: [
                    {
                        type: "pie",
                        showInLegend: true,
                        indexLabel: "{label} {y}票",
                        indexLabelFontSize: 12,
                        toolTipContent:"{label} {y}票",
                        dataPoints: [
                            { y: 100, legendText: "{label}",label:"长城" },
                            { y: 20, legendText: "{label}",label:"摆渡人" },
                            { y: 30, legendText: "{label}",label:"玩命直播" },
                            { y: 90, legendText: "{label}",label:"星球大战"},
                            { y: 60, legendText: "{label}",label:"浪漫搭档" }
                        ]
                    },
                ]
            },
            // 当月电影饼状图
            item3:{
                title:{
                    text: "各项电影当月饼状图",
                    fontSize:16
                },
                animationEnabled: true,
                legend: {			
                    verticalAlign: "center",
                    horizontalAlign: "left"
                },
                data: [
                    {
                        type: "pie",
                        showInLegend: true,
                        indexLabel: "{label} {y}票",
                        indexLabelFontSize: 12,
                        toolTipContent:"{label} {y}票",
                        dataPoints: [
                            { y: 200, legendText: "{label}",label:"长城" },
                            { y: 300, legendText: "{label}",label:"摆渡人" },
                            { y: 400, legendText: "{label}",label:"玩命直播" },
                            { y: 500, legendText: "{label}",label:"星球大战"},
                            { y: 600, legendText: "{label}",label:"浪漫搭档" }
                        ]
                    },
                ]
            },
            
            // 柱状图
            province1:{
                title:{
                    text: "各省份投票图",
                    fontSize:16
                },
                animationEnabled: true,
                theme: "theme2",
                data: [
                    {
                        type: "column",
                        name: "当日各省份投票数",
                        showInLegend: true,
                        axisY:{
                            suffix: "票"
                        },
                        dataPoints: [
                            { label: "湖北省",  y: 5,indexLabel:"{y}"  },
                            { label: "陕西省", y: 15,indexLabel:"{y}"  },
                            { label: "河北省", y: 25,indexLabel:"{y}"  },
                            { label: "河南省",  y: 30,indexLabel:"{y}"  },
                            { label: "湖南省",  y: 28,indexLabel:"{y}"  }
                        ]
                    },
                    {
                        type: "line",
                        name: "当月各省份投票数",
                        showInLegend: true,
                        axisY:{
                            suffix: "票"
                        },
                        dataPoints: [
                            { label: "湖北省",  y: 50,indexLabel:"{y}"  },
                            { label: "陕西省", y: 150,indexLabel:"{y}"  },
                            { label: "河北省", y: 250,indexLabel:"{y}"  },
                            { label: "河南省",  y: 300,indexLabel:"{y}"  },
                            { label: "湖南省",  y: 280,indexLabel:"{y}"  }
                        ]
                    }
                ]
            },
            // 当日省份投票饼状图
            province2:{
                title:{
                    text: "各省份当日饼状图",
                    fontSize:16
                },
                animationEnabled: true,
                legend: {
                    verticalAlign: "center",
                    horizontalAlign: "left"
                },
                data: [
                    {
                        type: "pie",
                        showInLegend: true,
                        indexLabel: "{label} {y}票",
                        indexLabelFontSize: 12,
                        toolTipContent:"{label} {y}票",
                        dataPoints: [
                            { y: 200, legendText: "{label}",label:"湖北省" },
                            { y: 300, legendText: "{label}",label:"陕西省" },
                            { y: 400, legendText: "{label}",label:"河北省" },
                            { y: 500, legendText: "{label}",label:"河南省"},
                            { y: 600, legendText: "{label}",label:"湖南省" }
                        ]
                    },
                ]
            },
            province3:{
                title:{
                    text: "各省份当月饼状图",
                    fontSize:16
                },
                animationEnabled: true,
                legend: {
                    verticalAlign: "center",
                    horizontalAlign: "left"
                },
                data: [
                    {
                        type: "pie",
                        showInLegend: true,
                        indexLabel: "{label} {y}票",
                        indexLabelFontSize: 12,
                        toolTipContent:"{label} {y}票",
                        dataPoints: [
                            { y: 2000, legendText: "{label}",label:"湖北省" },
                            { y: 3000, legendText: "{label}",label:"陕西省" },
                            { y: 4000, legendText: "{label}",label:"河北省" },
                            { y: 5000, legendText: "{label}",label:"河南省"},
                            { y: 6000, legendText: "{label}",label:"湖南省" }
                        ]
                    },
                ]
            }
        },
        loading:true
    },
    methods:{
        initChart:function(){
            var that = this;
            // $.get('/api/getSummary',function (res) {
            //     var result = JSON.parse(res);
            //     if(result.status > 0){
            //         that.option.item1.data.dataPoints = result.item_day;
            //        
            //     }
            // });
            new CanvasJS.Chart("item1",this.option.item1).render();
            new CanvasJS.Chart("item2",this.option.item2).render();
            new CanvasJS.Chart("item3",this.option.item3).render();
            new CanvasJS.Chart("province1",this.option.province1).render();
            new CanvasJS.Chart("province2",this.option.province2).render();
            new CanvasJS.Chart("province3",this.option.province3).render();
            console.log(this.option);
            this.loading = false;
        },
        getNums:function () {
            var that = this;
            $.get('/api/getNum',function (res) {
                var data = JSON.parse(res);
                console.log(data);
                if(data.status == 1){
                    that.logs = data.number;
                }

            })
        }

    },
    computed:{

    },
    ready:function(){
        var that = this;
        that.getNums();
        that.initChart();
        
        setTimeout(function () {
            if(that.loading === true){
                layer.open({content:'网络延迟，请重新加载'});
            }
        },8000);

    }

});